{"ast":null,"code":"import \"core-js/modules/es.symbol\";\nimport \"core-js/modules/es.symbol.description\";\nimport \"core-js/modules/es.symbol.iterator\";\nimport \"core-js/modules/es.array.filter\";\nimport \"core-js/modules/es.array.from\";\nimport \"core-js/modules/es.array.iterator\";\nimport \"core-js/modules/es.array.map\";\nimport \"core-js/modules/es.array.slice\";\nimport \"core-js/modules/es.function.name\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.regexp.to-string\";\nimport \"core-js/modules/es.string.iterator\";\nimport \"core-js/modules/web.dom-collections.iterator\";\n\nvar _s2 = $RefreshSig$();\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { loadAllMovies, setSelectedIndex } from '../../redux/actions';\nimport Tabs from './movieTabs/index';\nimport MovieFilter from '../movieFilter/index';\nimport Movie from './movie/index';\n\nvar MovieList = function MovieList(props) {\n  _s2();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isBottom = _useState2[0],\n      setIsBottom = _useState2[1];\n\n  var router = useRouter();\n\n  var handleScroll = function handleScroll() {\n    if (window.pageYOffset + window.innerHeight === document.documentElement.scrollHeight) {\n      setIsBottom(true);\n    }\n  };\n\n  useEffect(function () {\n    window.addEventListener('scroll', handleScroll);\n    return function () {\n      return window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n  useEffect(function () {\n    var searchTerm = router.asPath.slice(8);\n    props.dispatch(loadAllMovies(searchTerm, props.sortBy, props.filter, 0, true));\n  }, [router.asPath]);\n  useEffect(function () {\n    if (isBottom) {\n      props.dispatch(loadAllMovies(props.searchTerm, props.sortBy, props.filter, props.offset + 9));\n    }\n\n    setIsBottom(false);\n  }, [isBottom]);\n\n  var sortByTabClick = function sortByTabClick(e) {\n    if (e.target.dataset.tab === 'all') {\n      props.dispatch(loadAllMovies(props.searchTerm, props.sortBy, '', 0, true));\n    } else {\n      props.dispatch(loadAllMovies(props.searchTerm, props.sortBy, e.target.dataset.tab, 0, true));\n    }\n  };\n\n  var handleChange = function handleChange(e) {\n    if (e && e.target.options[e.target.selectedIndex].value === 'title') {\n      props.dispatch(loadAllMovies(props.searchTerm, 'title', props.filter, 0, true));\n    } else if (e && e.target.options[e.target.selectedIndex].value === 'date') {\n      props.dispatch(loadAllMovies(props.searchTerm, 'date', props.filter, 0, true));\n    } else {\n      props.dispatch(loadAllMovies(props.searchTerm, 'rating', props.filter, 0, true));\n    }\n  };\n\n  var handleTabClick = function handleTabClick(e, index) {\n    props.dispatch(setSelectedIndex(index));\n    sortByTabClick(e);\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort-line\"\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    handleTabClick: handleTabClick,\n    selectedTabIndex: props.selectedTabIndex\n  }), /*#__PURE__*/React.createElement(MovieFilter, {\n    handleChange: handleChange\n  })), Boolean(props.movies.length) && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"sort-line__movies-num\"\n  }, \"\".concat(props.movies && props.movies.length, \" movies found\")), Boolean(!props.movies.length) && /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '100px'\n    }\n  }, \"Movies not found\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"movies-list\"\n  }, Boolean(props.movies.length) && props.movies.map(function (movie) {\n    return /*#__PURE__*/React.createElement(Movie, {\n      key: movie.id,\n      description: movie\n    });\n  }))));\n};\n\n_s2(MovieList, \"s+Olj4ZxyMzqdlaKp6h8scpWoPg=\", false, function () {\n  return [useRouter];\n});\n\n_c = MovieList;\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    movies: store.homePage.movies,\n    sortBy: store.homePage.sortBy,\n    selectedTabIndex: store.homePage.selectedTabIndex,\n    searchTerm: store.homePage.searchTerm,\n    filter: store.homePage.filter,\n    offset: store.homePage.offset\n  };\n};\n\nexport default connect(mapStateToProps)(MovieList);\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieList\");","map":{"version":3,"sources":["C:/Users/Siarhei_Ivaneichyk/Desktop/reactMentoring/reactApplication/src/components/movieList/movieList.jsx"],"names":["React","useEffect","useState","connect","useRouter","loadAllMovies","setSelectedIndex","Tabs","MovieFilter","Movie","MovieList","props","isBottom","setIsBottom","router","handleScroll","window","pageYOffset","innerHeight","document","documentElement","scrollHeight","addEventListener","removeEventListener","searchTerm","asPath","slice","dispatch","sortBy","filter","offset","sortByTabClick","e","target","dataset","tab","handleChange","options","selectedIndex","value","handleTabClick","index","selectedTabIndex","Boolean","movies","length","textAlign","marginTop","map","movie","id","mapStateToProps","store","homePage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useRouter } from 'next/router';\r\nimport { loadAllMovies, setSelectedIndex } from '../../redux/actions';\r\nimport Tabs from './movieTabs/index';\r\nimport MovieFilter from '../movieFilter/index';\r\nimport Movie from './movie/index';\r\n\r\nconst MovieList = (props) => {\r\n  const [isBottom, setIsBottom] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const handleScroll = () => {\r\n    if ((window.pageYOffset + window.innerHeight) === document.documentElement.scrollHeight) {\r\n      setIsBottom(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const searchTerm = router.asPath.slice(8);\r\n    props.dispatch(loadAllMovies(searchTerm, props.sortBy, props.filter, 0, true));\r\n  }, [router.asPath]);\r\n\r\n  useEffect(() => {\r\n    if (isBottom) {\r\n      props.dispatch(loadAllMovies(props.searchTerm, props.sortBy, props.filter, props.offset + 9));\r\n    }\r\n    setIsBottom(false);\r\n  }, [isBottom]);\r\n\r\n  const sortByTabClick = (e) => {\r\n    if (e.target.dataset.tab === 'all') {\r\n      props.dispatch(loadAllMovies(props.searchTerm, props.sortBy, '', 0, true));\r\n    } else {\r\n      props.dispatch(loadAllMovies(props.searchTerm, props.sortBy, e.target.dataset.tab, 0, true));\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    if (e && e.target.options[e.target.selectedIndex].value === 'title') {\r\n      props.dispatch(loadAllMovies(props.searchTerm, 'title', props.filter, 0, true));\r\n    } else if (e && e.target.options[e.target.selectedIndex].value === 'date') {\r\n      props.dispatch(loadAllMovies(props.searchTerm, 'date', props.filter, 0, true));\r\n    } else {\r\n      props.dispatch(loadAllMovies(props.searchTerm, 'rating', props.filter, 0, true));\r\n    }\r\n  };\r\n\r\n  const handleTabClick = (e, index) => {\r\n    props.dispatch(setSelectedIndex(index));\r\n    sortByTabClick(e);\r\n  };\r\n\r\n  return (\r\n        <main>\r\n            <div className=\"wrapper\">\r\n                <div className=\"sort-line\">\r\n                    <Tabs\r\n                        handleTabClick={handleTabClick}\r\n                        selectedTabIndex={props.selectedTabIndex}\r\n                    />\r\n                    <MovieFilter\r\n                        handleChange={handleChange}\r\n                    />\r\n                </div>\r\n                {Boolean(props.movies.length) && <p className=\"sort-line__movies-num\">{`${props.movies && props.movies.length} movies found`}</p>}\r\n                {Boolean(!props.movies.length) && <h2 style={{ textAlign: 'center', marginTop: '100px' }}>Movies not found</h2>}\r\n                <div className=\"movies-list\">\r\n                    {\r\n                        Boolean(props.movies.length) && props.movies.map((movie) => <Movie key={movie.id} description={movie} />)\r\n                    }\r\n                </div>\r\n            </div>\r\n        </main>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (store) => ({\r\n  movies: store.homePage.movies,\r\n  sortBy: store.homePage.sortBy,\r\n  selectedTabIndex: store.homePage.selectedTabIndex,\r\n  searchTerm: store.homePage.searchTerm,\r\n  filter: store.homePage.filter,\r\n  offset: store.homePage.offset,\r\n});\r\n\r\nexport default connect(mapStateToProps)(MovieList);\r\n"]},"metadata":{},"sourceType":"module"}